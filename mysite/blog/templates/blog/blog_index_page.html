{% extends "base.html" %}

!-- Load wagtailimages_tags: -->
{% load wagtailcore_tags wagtailimages_tags %}



{% block body_class %}template-blogindexpage{% endblock %}

{% block page_heading%}
    <h1>{{ page.title }}</h1>
    <span class="subheading">{{ page.intro|richtext }}</span>
{% endblock %}                         

{% block content %}
    <!-- Post preview-->
        {% for post in blogpages %}
        {% with post=post.specific %}

    <div class="post-preview">
        <a href="{% pageurl post %}">
            <h2 class="post-title">{{ post.title }}</h2>
            <h3 class="post-subtitle">{{ post.intro }}</h3>
            {% with post.main_image as main_image %}
                {% if main_image %}
                {% image post.main_image original as img %}
 
                <img src="{{ img.url }}" alt="{{ img.alt }}" class="post-preview-image">

                {% endif %}
            {% endwith %}
            
        </a>
        <p>{{ post.description|richtext }}</p>
        
        <p class="post-meta">
            {{post.date}}<br>
            {% with authors=post.authors.all %}
            {% if authors %}
                Автор:
                    {% for author in authors %}
                            {{ author.name }}   
                    {% endfor %}
            {% endif %}
        {% endwith %}
        </p>

    </div>
    <!-- Divider-->
    <hr class="my-4" />
    {% endwith %}
    {% endfor %}
                
    <!-- Pager-->

    {% if blogpages.has_next %}
        <ul class="pagination">
        {% if blogpages.has_previous %}
            <li><div class="d-flex justify-content-end mb-4"><a class="btn btn-primary text-uppercase" href="?page={{ blogpages.previous_page_number }}"><i class="fa fa-angle-left"></i></a></div></li> 
        {% endif %}
        {% for page_num in blogpages.paginator.page_range %}
           <li {% if page_num == blogpages.number %}class="active"{% endif %}><div class="d-flex justify-content-end mb-4"><a class="btn btn-primary text-uppercase" href="?page={{ page_num }}">{{ page_num }}</a></li>
        {% endfor %}
        {% if blogpages.has_next %}
            <li><div class="d-flex justify-content-end mb-4"><a class="btn btn-primary text-uppercase" href="?page={{ blogpages.next_page_number }}"><i class="fa fa-angle-right"></i></a></li>
        {% endif %}
        </ul>
    {% endif %}

                    
{% endblock %}